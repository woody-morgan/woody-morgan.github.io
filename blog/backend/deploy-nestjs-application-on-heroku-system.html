<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>Deploy Nestjs Application on Heroku</title><meta name="robots" content="follow, index"/><meta name="description" content="Nestjs 어플리케이션을 배포하면서 생긴 문제점을 정리하였습니다"/><meta property="og:url" content="https://woody-morgan.github.io//blog/backend/deploy-nestjs-application-on-heroku-system"/><meta property="og:type" content="article"/><meta property="og:site_name" content="woody-morgan.github.io"/><meta property="og:description" content="Nestjs 어플리케이션을 배포하면서 생긴 문제점을 정리하였습니다"/><meta property="og:title" content="Deploy Nestjs Application on Heroku"/><meta property="og:image" content="https://woody-morgan.github.io//static/images/heroku-nestjs.webp"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="Deploy Nestjs Application on Heroku"/><meta name="twitter:description" content="Nestjs 어플리케이션을 배포하면서 생긴 문제점을 정리하였습니다"/><meta name="twitter:image" content="https://woody-morgan.github.io//static/images/heroku-nestjs.webp"/><meta property="article:published_time" content="2022-08-07T00:00:00.000Z"/><link rel="canonical" href="https://woody-morgan.github.io//blog/backend/deploy-nestjs-application-on-heroku-system"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://woody-morgan.github.io//blog/backend/deploy-nestjs-application-on-heroku-system"
  },
  "headline": "Deploy Nestjs Application on Heroku",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://woody-morgan.github.io//static/images/heroku-nestjs.webp"
    }
  ],
  "datePublished": "2022-08-07T00:00:00.000Z",
  "dateModified": "2022-08-07T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Kim, Dong-Wook"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "woody morgan",
    "logo": {
      "@type": "ImageObject",
      "url": "https://woody-morgan.github.io//static/images/logo.png"
    }
  },
  "description": "Nestjs 어플리케이션을 배포하면서 생긴 문제점을 정리하였습니다"
}</script><meta name="next-head-count" content="20"/><link rel="preload" href="/_next/static/css/35c5c6636e0e5fd1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/35c5c6636e0e5fd1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-7b5e3b538b1441e1.js" defer=""></script><script src="/_next/static/chunks/main-63e2e8f7580e9625.js" defer=""></script><script src="/_next/static/chunks/pages/_app-31861f84ad26bbcb.js" defer=""></script><script src="/_next/static/chunks/860-5d67c27e6b591244.js" defer=""></script><script src="/_next/static/chunks/800-b0aa0e93ac41918c.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-f0fe9f9fb583fc8f.js" defer=""></script><script src="/_next/static/erbOjlWZPobhv0pvnzdZV/_buildManifest.js" defer=""></script><script src="/_next/static/erbOjlWZPobhv0pvnzdZV/_ssgManifest.js" defer=""></script><script src="/_next/static/erbOjlWZPobhv0pvnzdZV/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Inspirations" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" class="flex text-gray-900 dark:text-gray-100" viewBox="0 0 128 128" width="48" height="48" fill="currentColor"><g transform="translate(0.000000,132.000000) scale(0.100000,-0.100000)"><path d="M523 1126 c-181 -44 -334 -202 -372 -384 -35 -166 15 -330 138 -453 199 -199 503 -199 702 0 199 199 199 503 0 702 -126 126 -299 176 -468 135z m259 -57 c191 -64 308 -227 308 -429 0 -256 -194 -450 -450 -450 -256 0 -450 194 -450 450 0 200 116 364 305 429 82 28 204 28 287 0z"></path><path d="M533 1006 c-104 -34 -194 -114 -241 -214 -23 -49 -27 -70 -27 -152 0 -87 3 -101 32 -161 39 -80 111 -150 191 -187 49 -23 70 -27 152 -27 87 0 101 3 161 32 80 39 150 111 187 191 23 49 27 70 27 152 0 82 -4 103 -27 152 -37 79 -108 152 -185 190 -54 26 -79 32 -146 35 -51 2 -98 -2 -124 -11z m89 -93 c2 -44 7 -58 18 -58 11 0 16 14 18 58 3 53 5 57 27 57 53 0 136 -42 190 -95 53 -54 95 -137 95 -190 0 -22 -4 -24 -57 -27 -44 -2 -58 -7 -58 -18 0 -11 14 -16 58 -18 53 -3 57 -5 57 -27 0 -53 -42 -136 -95 -190 -54 -53 -137 -95 -190 -95 -22 0 -24 4 -27 58 -2 43 -7 57 -18 57 -11 0 -16 -14 -18 -57 -3 -54 -5 -58 -27 -58 -53 0 -136 42 -190 95 -53 54 -95 137 -95 190 0 22 4 24 58 27 43 2 57 7 57 18 0 11 -14 16 -57 18 -54 3 -58 5 -58 27 0 13 9 50 21 80 38 103 166 203 261 204 26 1 27 -1 30 -56z"></path><path d="M664 839 c-8 -13 12 -32 64 -61 17 -9 42 -35 57 -58 26 -42 47 -48 53 -16 11 57 -146 180 -174 135z"></path><path d="M513 754 c-3 -9 5 -26 21 -43 19 -20 26 -38 26 -67 0 -54 31 -84 86 -84 33 0 46 -7 74 -35 37 -38 70 -46 70 -17 0 10 -16 33 -35 52 -29 28 -35 41 -35 75 0 55 -31 85 -86 85 -30 0 -47 6 -64 25 -27 29 -48 32 -57 9z m157 -89 c26 -32 -13 -81 -47 -59 -35 22 -23 74 17 74 10 0 23 -7 30 -15z"></path></g></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Inspirations</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100" opacity="0"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-24 right-0 z-[1000] h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed h-full w-full cursor-auto focus:outline-none"></button><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div style="opacity:1"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2022-08-07T00:00:00.000Z">2022년 8월 7일 일요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Deploy Nestjs Application on Heroku</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/avatar.jpeg" width="38px" height="38px" alt="avatar" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Kim, Dong-Wook</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><details open=""><summary class="ml-6 pt-2 pb-2 text-xl font-bold">Table of Contents</summary><div class="ml-6"><ul><li class="false"><a href="#배포하면서-생긴-문제점">배포하면서 생긴 문제점</a></li><li class="ml-6"><a href="#1-로컬-nestjs-어플리케이션에서-heroku에서-제공한-postgres-서버에-접속할-수-없음">1. 로컬 Nestjs 어플리케이션에서 Heroku에서 제공한 Postgres 서버에 접속할 수 없음</a></li><li class="ml-6"><a href="#11-해결책">1.1. 해결책</a></li><li class="ml-6"><a href="#2-javascript-heap-memory-overflow">2. Javascript Heap Memory Overflow</a></li><li class="ml-6"><a href="#20-알아야할-점">2.0. 알아야할 점</a></li><li class="ml-6"><a href="#21-해결책">2.1. 해결책</a></li><li class="ml-6"><a href="#3-devdependencies에서-설치된-모듈이-heroku에서-배포된-후-사용할-수-없다고-에러가-발생">3. devDependencies에서 설치된 모듈이 Heroku에서 배포된 후 사용할 수 없다고 에러가 발생</a></li><li class="ml-6"><a href="#31-해결책">3.1. 해결책</a></li><li class="false"><a href="#heroku-postgres에-postgis-연결하기">Heroku Postgres에 Postgis 연결하기</a></li><li class="false"><a href="#결론">결론</a></li></ul></div></details><h2 id="intro"><a href="#intro" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Intro</h2><p>이번 글은 많은 분들이 해당 에러를 쉽게 해결할 수 있도록 한글로 작성하게 되었습니다. 해당 글은 Nestjs 어플리케이션을 Heroku 플랫폼에 배포하면서 발생할 수 있는 문제점과 해결책을 제시하고 있습니다. 하지만 본 필자는 Nestjs를 배워나가고 있는 입장이므로 적절하지 않은 해결책을 제시하고 있을 수 있습니다. 만약 틀린 해결책이라면 댓글로 알려주시면 감사하겠습니다.</p><p>제 어플리케이션에서 쓰고 있는 Backend 기술 스택은 다음과 같습니다</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://nestjs.com/">Nestjs</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://typeorm.io/">TypeORM</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://www.postgresql.org/">Postgres</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://postgis.net/">Postgis</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://www.heroku.com/">Heroku</a></li></ul><h2 id="배포하면서-생긴-문제점"><a href="#배포하면서-생긴-문제점" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>배포하면서 생긴 문제점</h2><h3 id="1-로컬-nestjs-어플리케이션에서-heroku에서-제공한-postgres-서버에-접속할-수-없음"><a href="#1-로컬-nestjs-어플리케이션에서-heroku에서-제공한-postgres-서버에-접속할-수-없음" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. 로컬 Nestjs 어플리케이션에서 Heroku에서 제공한 Postgres 서버에 접속할 수 없음</h3><p>로컬 Nestjs 어플리케이션에서 Heroku에서 제공한 Postgres 서버에 접근해야할 필요가 생겼습니다. DB가 처음 생성되면 Nestjs에서 사용할 DB 테이블을 생성할 필요가 있습니다.이를 Typeorm의 Synchronize 옵션을 사용하면 자동으로 생성해줍니다. 따라서 처음에 DB를 initialize해주기 위해서 로컬 Nestjs 어플리케이션에서 Heroku Postgres 서버에 접속할 필요가 있었습니다.</p><p>하지만 local에서 했던 것과 같이 Heroku Postgres 서버에 접속하면 아래와 같은 Credential에러가 발생합니다. <img alt="Credential Error" src="https://d.pr/i/lhZKv8.png"/></p><h4 id="11-해결책"><a href="#11-해결책" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1.1. 해결책</h4><p>이는 Heroku Postgres 서버에 사용하는 pg_hba.conf 설정 파일에서 whitelist를 이용해서 접근할 수 있는 IP를 제한하기 때문입니다. 이를 해결하기 위해서는 Postgres 서버에서 접속할 수 있는 IP를 추가해야합니다. 하지만 Heroku에서 Postgres 설정파일에 접근할 수 있는 방법을 찾지 못하여 Local에서 우회해서 credential을 확인하지 않도록 설정하여 해결했습니다.(단 이 방법은 절대 좋은 방법이라고 할 수 없습니다. 편의를 위해서 사용한 방법이니 추후 좋은 방법이 있으면 수정해야합니다.)</p><div class="remark-code-title">config.ts</div><div class="relative"><pre><code class="language-typescript code-highlight"><span class="code-line">    <span class="token operator">...</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">      entities<span class="token punctuation">,</span>
</span><span class="code-line">      type<span class="token operator">:</span> <span class="token string">&#x27;postgres&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">      name<span class="token operator">:</span> <span class="token string">&#x27;default&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">      host<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#x27;DB_HOST&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      port<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token string">&#x27;DB_PORT&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      username<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#x27;DB_USERNAME&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      password<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#x27;DB_PASSWORD&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      database<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&#x27;DB_DATABASE&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token operator">...</span>
</span><span class="code-line">      ssl<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBoolean</span><span class="token punctuation">(</span><span class="token string">&#x27;DB_SSL&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token operator">?</span> <span class="token punctuation">{</span>
</span><span class="code-line">            rejectUnauthorized<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre></div><p>위와 같은 Typeorm이나 Sequalizer를 설정하는 파일이 있을 것 입니다. 위에서 ssl부분을 추가하고 rejectUnauthorized: false 옵션을 주면 우회할 수 있습니다. 단 오히려 로컬 DB로 테스트할 시 해당 옵션이 켜져 있으면 에러를 발생시키니 꼭 관련 설정을 해주는 환경변수를 만들어서 관리해주셔야합니다.</p><h3 id="2-javascript-heap-memory-overflow"><a href="#2-javascript-heap-memory-overflow" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. Javascript Heap Memory Overflow</h3><p>기본적으로 CI/CD 플랫폼들은 어플리케이션을 Build해서 배포 후, devDependencies에 선언된 패키지들을 삭제합니다. 이는 효율적으로 플랫폼을 관리하기 위해서 사용되는 기능이며, 사용자가 이를 허용하지 않을 수 있습니다. 단, 이 경우 예상치 못한 에러(ex. CI/CD 플랫폼에서 기본으로 제공되는 메모리 이상으로 사용해서 어플리케이션을 실행할 수 없는 에러가 발생할 수 있음) 가 발생할 수 있기 때문에, 적절한 패키지 관리가 필요합니다. 실제로 해당 에러에는 R14에러, <a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/59205530/heroku-server-crashes-with-javascript-heap-out-of-memory-when-deploying-react">Javascript heap out of memory</a> 에러 등이 있습니다.</p><h4 id="20-알아야할-점"><a href="#20-알아야할-점" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2.0. 알아야할 점</h4><ol><li>Javascript heap out of memory를 해결하기 위해서 <a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/59205530/heroku-server-crashes-with-javascript-heap-out-of-memory-when-deploying-react">자바스크립트의 Garbage Collector 작동 메모리 설정</a>을 하라는 글이 검색결과 맨 상단에 위치합니다. 이는 Node 버전 12 이하에서 유효합니다. 왜냐하면 Node 12버전 이하에서 Garbage Collection이 작동하는 기본 메모리는 1.5GB였고 Heroku의 기본 플랜이 제공하는 메모리는 512MB이기 때문입니다. 하지만 2022년 기준 Node의 LTS버전이 16으로 올라왔기 때문에 기본적으로 동적인 Garbage Collection이 적용됩니다. 따라서 해당 글은 더 이상 유효하지 않습니다.</li></ol><h4 id="21-해결책"><a href="#21-해결책" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2.1. 해결책</h4><ol><li>가장 간단한 해결책은 Heroku에서 무료로 제공하는 Plan 이 아닌 더 많은 메모리를 제공하는 Plan을 사용하는 것입니다. 어플리케이션이 작동할때 대부분의 경우 헤로쿠에서 제공하는 기본 메모리보다 적게 사용하지만 특정 시나리오에서 Garbage Collection이 작동하지 전에 Heroku에서 제공하는 512MB 이상을 사용하게 될 수도 있습니다. 따라서 더 높은 Plan을 사용하는 것은 좋은 선택입니다. 하지만 이 경우 매달 7달러 또는 그 이상의 비용을 내야하기 때문에 취미로 진행하는 프로젝트에 적절하지 않을 수 있습니다</li><li>실제 배포에 필요없는 패키지들을 package.json에서 제거하거나 devDependencies에 선언해주면 됩니다. 이렇게 하면 heroku의 CI/CD 플랫폼이 자동으로 devDependencies에 선언된 패키지들을 삭제해줍니다. <code>하지만 이 경우, 개발자들이 통상적으로 devDependencies에 선언되어야한다고 생각되는 패키지가 실제 dependencies에 있어야하는 경우가 있어 주의를 해야합니다.(주로 런타임에 발생하기 때문에 주의 필요)</code></li></ol><h3 id="3-devdependencies에서-설치된-모듈이-heroku에서-배포된-후-사용할-수-없다고-에러가-발생"><a href="#3-devdependencies에서-설치된-모듈이-heroku에서-배포된-후-사용할-수-없다고-에러가-발생" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3. devDependencies에서 설치된 모듈이 Heroku에서 배포된 후 사용할 수 없다고 에러가 발생</h3><p>이 에러는 실제 배포후 에러를 잡을 수 있어 큰 주의를 요합니다(서비스 중에 해당 에러가 발생하면 큰 문제가 됩니다). 해당 문제는 제가 오픈소스로 풀어놓은 <a target="_blank" rel="noopener noreferrer" href="https://github.com/woody-morgan/nestify/blob/main/src/shared/services/api-config.service.ts">nestify</a> 저장소에 있는 파일에서 발생했습니다. 위 파일의 코드중 if(module.hot) 부분에서 발생했습니다.</p><div class="remark-code-title">api-config.service.ts</div><div class="relative"><pre><code class="language-typescript code-highlight"><span class="code-line"><span class="token operator">...</span>
</span><span class="code-line"><span class="token keyword">get</span> <span class="token function">postgresConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> TypeOrmModuleOptions <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">let</span> entities <span class="token operator">=</span> <span class="token punctuation">[</span>
</span><span class="code-line">      __dirname <span class="token operator">+</span> <span class="token string">&#x27;/../../modules/**/*.entity{.ts,.js}&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">      __dirname <span class="token operator">+</span> <span class="token string">&#x27;/../../modules/**/*.view-entity{.ts,.js}&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">let</span> migrations <span class="token operator">=</span> <span class="token punctuation">[</span>__dirname <span class="token operator">+</span> <span class="token string">&#x27;/../../database/migrations/*{.ts,.js}&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> entityContext <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token string">&#x27;./../../modules&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source"><span class="token escape special-escape">\.</span>entity<span class="token escape special-escape">\.</span>ts<span class="token function anchor">$</span></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token operator">...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token operator">...</span>
</span></code></pre></div><p>위 코드는 프로젝트 Hot Reload시 변경된 파일에 대해서만 Refresh를 해주는 코드입니다. 이 기능을 사용하기 위해서는 아래의 패키지들이 필요합니다.</p><div class="remark-code-title">package.json</div><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line">  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.73.0&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.10.0&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;webpack-node-externals&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.0&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;@types/webpack-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.17.0&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;clean-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.0&quot;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre></div><p>하지만 통상적으로 위의 webpack과 관련된 패키지들은 dependencies에 선언되는 것이 아닌 devDependencies에 선언되어야한다고 대부분의 <a target="_blank" rel="noopener noreferrer" href="https://jakekwak.gitbook.io/nestjs/techniques/hot-reload-webpack">블로그 글</a>에서 안내하고 있습니다. 이는 분명 맞으며, 또한 위의 selective hot reload 기능은 NODE_ENV가 development인 경우에만 사용하는 기능이므로 논리적으로도 build 이후 필요가 없는 코드입니다. 게다가 local에서 실행시 에러가 발생하지 않습니다.(local에서는 build하고 실행해서 node_modules에 있는 devDependencies 모듈을 삭제하지 않기 때문입니다)</p><p>하지만 Heroku에서 배포해도 에러없이 동작할까요? 그렇지 않습니다. Heroku와 같은 CI/CD 플랫폼은 devDependencies를 모두 삭제합니다. 즉 프로젝트가 빌드 되고, devDependencies를 node_modules에서 삭제하고, 프로젝트를 실행하면 그때 위와 같은 devDependencies에 선언된 모듈이 필요한 코드는 에러가 발생하는 것입니다. 따라서 적절하게 패키지의 위치를 선언하지 않으면 아래와 같은 에러가 발생합니다.</p><p><img alt="RuntimeError" src="https://d.pr/i/K6ykSr.png"/></p><h4 id="31-해결책"><a href="#31-해결책" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3.1. 해결책</h4><ol><li>devDependencies에 선언된 모듈을 dependencies에 선언하여 사용합니다. 하지만 Deploy된 백앤드 어플리케이션의 메모리 사용률을 높일 수 있고, 또한 통상적인 모듈 선언 위치가 아니기 때문에 불필요한 오해를 일으킬 수 있습니다. 따라서 정말 필요한 모듈만 위치를 옮겨서 선언해야합니다.</li></ol><h2 id="heroku-postgres에-postgis-연결하기"><a href="#heroku-postgres에-postgis-연결하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Heroku Postgres에 Postgis 연결하기</h2><p>먼저 <a target="_blank" rel="noopener noreferrer" href="https://m.blog.naver.com/batgirl1/222126972818">블로그</a>를 참조하여 Heroku Postgresql을 설치해주세요</p><p>프로젝트와 Postgresql을 연결했다면 heroku postgresql 설정중 Settings 섹션에서 아래와 같은 Credentials 정보를 볼 수 있습니다</p><p><img alt="credentials" src="https://d.pr/TVFj55.png"/></p><p>그 중 맨 아래에 있는 Heroku CLI에 있는 커맨드를 전부 복사해서 본인의 터미널에 입력해주세요(만약 heroku cli가 설치되어 있지 않다면 설치해주세요)</p><p><img alt="install extension" src="https://d.pr/gzG7Ry.png"/></p><p>그럼 위와 같은 psql CLI창이 뜨고 <code>CREATE EXTENSION postgis;</code>라고 입력해주세요(위의 그림에 postigs라고 오타가 났습니다) 그렇게 되면 자동으로 postgis가 heroku postgresql에 설치됩니다. 이제 postgis관련 기능을 사용할 수 있습니다. Heroku에서 지원하는 postgresql Extension은 <a target="_blank" rel="noopener noreferrer" href="https://devcenter.heroku.com/articles/heroku-postgres-extensions-postgis-full-text-search">링크</a>에서 확인할 수 있습니다. <code>단 postgis의 경우 Extension 설치시 대략 8500개의 DB Row가 추가됩니다(지리 정보를 추가하기 위해서). 이는 Heroku Postgresql Hobby Tier에서 제공하는 10000개의 Row 제한의 85%를 차지하기 때문에 사용에 주의가 필요합니다</code></p><h2 id="결론"><a href="#결론" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>결론</h2><p>위의 해결책이 여러분에게 도움이 되었으면 좋겠습니다. 궁금한 점이 있다면 댓글에 남겨주세요</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="noopener noreferrer" href="https://github.com/woody-morgan/woody-morgan.github.io/blob/master/data/blog/backend/deploy-nestjs-application-on-heroku-system.mdx">View on GitHub</a></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/backend">backend</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/frontend/implement-reflow-prevented-lazy-loading-image-component">Implement Reuseable &lt;img/&gt;</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/frontend/optimizing-nextjs-application">Next.js Application 최적화하기(feat. Vercel)</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/woody-morgan"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/woody-morgan"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>woody morgan</div><div> • </div><div>© 2024</div><div> • </div><a href="/">woody-morgan.github.io</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var d=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var t=a=\u003el(a,\"__esModule\",{value:!0});var k=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{t(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},g=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of h(s))!u.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026l(a,n,{get:()=\u003es[n],enumerable:!(c=p(s,n))||c.enumerable});return a},f=a=\u003eg(t(l(a!=null?d(m(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=k((D,r)=\u003e{r.exports=_jsx_runtime});var j={};N(j,{default:()=\u003eb,frontmatter:()=\u003ey});var e=f(o()),y={title:\"Deploy Nestjs Application on Heroku\",date:new Date(16598304e5),tags:[\"backend\"],draft:!1,summary:\"Nestjs \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC744 \\uBC30\\uD3EC\\uD558\\uBA74\\uC11C \\uC0DD\\uAE34 \\uBB38\\uC81C\\uC810\\uC744 \\uC815\\uB9AC\\uD558\\uC600\\uC2B5\\uB2C8\\uB2E4\",images:[\"/static/images/heroku-nestjs.webp\"],layout:\"PostLayout\"};function w(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",ul:\"ul\",li:\"li\",h3:\"h3\",img:\"img\",h4:\"h4\",pre:\"pre\",code:\"code\",ol:\"ol\"},a.components),{TOCInline:i}=n;return i||v(\"TOCInline\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i,{toc:a.toc,exclude:\"Intro\",asDisclosure:!0}),(0,e.jsxs)(n.h2,{id:\"intro\",children:[(0,e.jsx)(n.a,{href:\"#intro\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Intro\"]}),(0,e.jsx)(n.p,{children:\"\\uC774\\uBC88 \\uAE00\\uC740 \\uB9CE\\uC740 \\uBD84\\uB4E4\\uC774 \\uD574\\uB2F9 \\uC5D0\\uB7EC\\uB97C \\uC27D\\uAC8C \\uD574\\uACB0\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uD55C\\uAE00\\uB85C \\uC791\\uC131\\uD558\\uAC8C \\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uD574\\uB2F9 \\uAE00\\uC740 Nestjs \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC744 Heroku \\uD50C\\uB7AB\\uD3FC\\uC5D0 \\uBC30\\uD3EC\\uD558\\uBA74\\uC11C \\uBC1C\\uC0DD\\uD560 \\uC218 \\uC788\\uB294 \\uBB38\\uC81C\\uC810\\uACFC \\uD574\\uACB0\\uCC45\\uC744 \\uC81C\\uC2DC\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC \\uBCF8 \\uD544\\uC790\\uB294 Nestjs\\uB97C \\uBC30\\uC6CC\\uB098\\uAC00\\uACE0 \\uC788\\uB294 \\uC785\\uC7A5\\uC774\\uBBC0\\uB85C \\uC801\\uC808\\uD558\\uC9C0 \\uC54A\\uC740 \\uD574\\uACB0\\uCC45\\uC744 \\uC81C\\uC2DC\\uD558\\uACE0 \\uC788\\uC744 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uB9CC\\uC57D \\uD2C0\\uB9B0 \\uD574\\uACB0\\uCC45\\uC774\\uB77C\\uBA74 \\uB313\\uAE00\\uB85C \\uC54C\\uB824\\uC8FC\\uC2DC\\uBA74 \\uAC10\\uC0AC\\uD558\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uC81C \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC5D0\\uC11C \\uC4F0\\uACE0 \\uC788\\uB294 Backend \\uAE30\\uC220 \\uC2A4\\uD0DD\\uC740 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC2B5\\uB2C8\\uB2E4\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://nestjs.com/\",children:\"Nestjs\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://typeorm.io/\",children:\"TypeORM\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.postgresql.org/\",children:\"Postgres\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://postgis.net/\",children:\"Postgis\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.heroku.com/\",children:\"Heroku\"})})]}),(0,e.jsxs)(n.h2,{id:\"\\uBC30\\uD3EC\\uD558\\uBA74\\uC11C-\\uC0DD\\uAE34-\\uBB38\\uC81C\\uC810\",children:[(0,e.jsx)(n.a,{href:\"#\\uBC30\\uD3EC\\uD558\\uBA74\\uC11C-\\uC0DD\\uAE34-\\uBB38\\uC81C\\uC810\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uBC30\\uD3EC\\uD558\\uBA74\\uC11C \\uC0DD\\uAE34 \\uBB38\\uC81C\\uC810\"]}),(0,e.jsxs)(n.h3,{id:\"1-\\uB85C\\uCEEC-nestjs-\\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC5D0\\uC11C-heroku\\uC5D0\\uC11C-\\uC81C\\uACF5\\uD55C-postgres-\\uC11C\\uBC84\\uC5D0-\\uC811\\uC18D\\uD560-\\uC218-\\uC5C6\\uC74C\",children:[(0,e.jsx)(n.a,{href:\"#1-\\uB85C\\uCEEC-nestjs-\\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC5D0\\uC11C-heroku\\uC5D0\\uC11C-\\uC81C\\uACF5\\uD55C-postgres-\\uC11C\\uBC84\\uC5D0-\\uC811\\uC18D\\uD560-\\uC218-\\uC5C6\\uC74C\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. \\uB85C\\uCEEC Nestjs \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC5D0\\uC11C Heroku\\uC5D0\\uC11C \\uC81C\\uACF5\\uD55C Postgres \\uC11C\\uBC84\\uC5D0 \\uC811\\uC18D\\uD560 \\uC218 \\uC5C6\\uC74C\"]}),(0,e.jsx)(n.p,{children:\"\\uB85C\\uCEEC Nestjs \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC5D0\\uC11C Heroku\\uC5D0\\uC11C \\uC81C\\uACF5\\uD55C Postgres \\uC11C\\uBC84\\uC5D0 \\uC811\\uADFC\\uD574\\uC57C\\uD560 \\uD544\\uC694\\uAC00 \\uC0DD\\uACBC\\uC2B5\\uB2C8\\uB2E4. DB\\uAC00 \\uCC98\\uC74C \\uC0DD\\uC131\\uB418\\uBA74 Nestjs\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD560 DB \\uD14C\\uC774\\uBE14\\uC744 \\uC0DD\\uC131\\uD560 \\uD544\\uC694\\uAC00 \\uC788\\uC2B5\\uB2C8\\uB2E4.\\uC774\\uB97C Typeorm\\uC758 Synchronize \\uC635\\uC158\\uC744 \\uC0AC\\uC6A9\\uD558\\uBA74 \\uC790\\uB3D9\\uC73C\\uB85C \\uC0DD\\uC131\\uD574\\uC90D\\uB2C8\\uB2E4. \\uB530\\uB77C\\uC11C \\uCC98\\uC74C\\uC5D0 DB\\uB97C initialize\\uD574\\uC8FC\\uAE30 \\uC704\\uD574\\uC11C \\uB85C\\uCEEC Nestjs \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC5D0\\uC11C Heroku Postgres \\uC11C\\uBC84\\uC5D0 \\uC811\\uC18D\\uD560 \\uD544\\uC694\\uAC00 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsxs)(n.p,{children:[\"\\uD558\\uC9C0\\uB9CC local\\uC5D0\\uC11C \\uD588\\uB358 \\uAC83\\uACFC \\uAC19\\uC774 Heroku Postgres \\uC11C\\uBC84\\uC5D0 \\uC811\\uC18D\\uD558\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC740 Credential\\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD569\\uB2C8\\uB2E4. \",(0,e.jsx)(n.img,{alt:\"Credential Error\",src:\"https://d.pr/i/lhZKv8.png\"})]}),(0,e.jsxs)(n.h4,{id:\"11-\\uD574\\uACB0\\uCC45\",children:[(0,e.jsx)(n.a,{href:\"#11-\\uD574\\uACB0\\uCC45\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1.1. \\uD574\\uACB0\\uCC45\"]}),(0,e.jsx)(n.p,{children:\"\\uC774\\uB294 Heroku Postgres \\uC11C\\uBC84\\uC5D0 \\uC0AC\\uC6A9\\uD558\\uB294 pg_hba.conf \\uC124\\uC815 \\uD30C\\uC77C\\uC5D0\\uC11C whitelist\\uB97C \\uC774\\uC6A9\\uD574\\uC11C \\uC811\\uADFC\\uD560 \\uC218 \\uC788\\uB294 IP\\uB97C \\uC81C\\uD55C\\uD558\\uAE30 \\uB54C\\uBB38\\uC785\\uB2C8\\uB2E4. \\uC774\\uB97C \\uD574\\uACB0\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 Postgres \\uC11C\\uBC84\\uC5D0\\uC11C \\uC811\\uC18D\\uD560 \\uC218 \\uC788\\uB294 IP\\uB97C \\uCD94\\uAC00\\uD574\\uC57C\\uD569\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC Heroku\\uC5D0\\uC11C Postgres \\uC124\\uC815\\uD30C\\uC77C\\uC5D0 \\uC811\\uADFC\\uD560 \\uC218 \\uC788\\uB294 \\uBC29\\uBC95\\uC744 \\uCC3E\\uC9C0 \\uBABB\\uD558\\uC5EC Local\\uC5D0\\uC11C \\uC6B0\\uD68C\\uD574\\uC11C credential\\uC744 \\uD655\\uC778\\uD558\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uC124\\uC815\\uD558\\uC5EC \\uD574\\uACB0\\uD588\\uC2B5\\uB2C8\\uB2E4.(\\uB2E8 \\uC774 \\uBC29\\uBC95\\uC740 \\uC808\\uB300 \\uC88B\\uC740 \\uBC29\\uBC95\\uC774\\uB77C\\uACE0 \\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4. \\uD3B8\\uC758\\uB97C \\uC704\\uD574\\uC11C \\uC0AC\\uC6A9\\uD55C \\uBC29\\uBC95\\uC774\\uB2C8 \\uCD94\\uD6C4 \\uC88B\\uC740 \\uBC29\\uBC95\\uC774 \\uC788\\uC73C\\uBA74 \\uC218\\uC815\\uD574\\uC57C\\uD569\\uB2C8\\uB2E4.)\"}),(0,e.jsx)(\"div\",{className:\"remark-code-title\",children:\"config.ts\"}),(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      entities\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      type\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'postgres'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      name\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'default'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      host\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'DB_HOST'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      port\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getNumber\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'DB_PORT'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      username\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'DB_USERNAME'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      password\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'DB_PASSWORD'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      database\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'DB_DATABASE'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      ssl\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getBoolean\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'DB_SSL'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            rejectUnauthorized\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC704\\uC640 \\uAC19\\uC740 Typeorm\\uC774\\uB098 Sequalizer\\uB97C \\uC124\\uC815\\uD558\\uB294 \\uD30C\\uC77C\\uC774 \\uC788\\uC744 \\uAC83 \\uC785\\uB2C8\\uB2E4. \\uC704\\uC5D0\\uC11C ssl\\uBD80\\uBD84\\uC744 \\uCD94\\uAC00\\uD558\\uACE0 rejectUnauthorized: false \\uC635\\uC158\\uC744 \\uC8FC\\uBA74 \\uC6B0\\uD68C\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uB2E8 \\uC624\\uD788\\uB824 \\uB85C\\uCEEC DB\\uB85C \\uD14C\\uC2A4\\uD2B8\\uD560 \\uC2DC \\uD574\\uB2F9 \\uC635\\uC158\\uC774 \\uCF1C\\uC838 \\uC788\\uC73C\\uBA74 \\uC5D0\\uB7EC\\uB97C \\uBC1C\\uC0DD\\uC2DC\\uD0A4\\uB2C8 \\uAF2D \\uAD00\\uB828 \\uC124\\uC815\\uC744 \\uD574\\uC8FC\\uB294 \\uD658\\uACBD\\uBCC0\\uC218\\uB97C \\uB9CC\\uB4E4\\uC5B4\\uC11C \\uAD00\\uB9AC\\uD574\\uC8FC\\uC154\\uC57C\\uD569\\uB2C8\\uB2E4.\"}),(0,e.jsxs)(n.h3,{id:\"2-javascript-heap-memory-overflow\",children:[(0,e.jsx)(n.a,{href:\"#2-javascript-heap-memory-overflow\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. Javascript Heap Memory Overflow\"]}),(0,e.jsxs)(n.p,{children:[\"\\uAE30\\uBCF8\\uC801\\uC73C\\uB85C CI/CD \\uD50C\\uB7AB\\uD3FC\\uB4E4\\uC740 \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC744 Build\\uD574\\uC11C \\uBC30\\uD3EC \\uD6C4, devDependencies\\uC5D0 \\uC120\\uC5B8\\uB41C \\uD328\\uD0A4\\uC9C0\\uB4E4\\uC744 \\uC0AD\\uC81C\\uD569\\uB2C8\\uB2E4. \\uC774\\uB294 \\uD6A8\\uC728\\uC801\\uC73C\\uB85C \\uD50C\\uB7AB\\uD3FC\\uC744 \\uAD00\\uB9AC\\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uC0AC\\uC6A9\\uB418\\uB294 \\uAE30\\uB2A5\\uC774\\uBA70, \\uC0AC\\uC6A9\\uC790\\uAC00 \\uC774\\uB97C \\uD5C8\\uC6A9\\uD558\\uC9C0 \\uC54A\\uC744 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uB2E8, \\uC774 \\uACBD\\uC6B0 \\uC608\\uC0C1\\uCE58 \\uBABB\\uD55C \\uC5D0\\uB7EC(ex. CI/CD \\uD50C\\uB7AB\\uD3FC\\uC5D0\\uC11C \\uAE30\\uBCF8\\uC73C\\uB85C \\uC81C\\uACF5\\uB418\\uB294 \\uBA54\\uBAA8\\uB9AC \\uC774\\uC0C1\\uC73C\\uB85C \\uC0AC\\uC6A9\\uD574\\uC11C \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC744 \\uC2E4\\uD589\\uD560 \\uC218 \\uC5C6\\uB294 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD560 \\uC218 \\uC788\\uC74C) \\uAC00 \\uBC1C\\uC0DD\\uD560 \\uC218 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0, \\uC801\\uC808\\uD55C \\uD328\\uD0A4\\uC9C0 \\uAD00\\uB9AC\\uAC00 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4. \\uC2E4\\uC81C\\uB85C \\uD574\\uB2F9 \\uC5D0\\uB7EC\\uC5D0\\uB294 R14\\uC5D0\\uB7EC, \",(0,e.jsx)(n.a,{href:\"https://stackoverflow.com/questions/59205530/heroku-server-crashes-with-javascript-heap-out-of-memory-when-deploying-react\",children:\"Javascript heap out of memory\"}),\" \\uC5D0\\uB7EC \\uB4F1\\uC774 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.h4,{id:\"20-\\uC54C\\uC544\\uC57C\\uD560-\\uC810\",children:[(0,e.jsx)(n.a,{href:\"#20-\\uC54C\\uC544\\uC57C\\uD560-\\uC810\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2.0. \\uC54C\\uC544\\uC57C\\uD560 \\uC810\"]}),(0,e.jsx)(n.ol,{children:(0,e.jsxs)(n.li,{children:[\"Javascript heap out of memory\\uB97C \\uD574\\uACB0\\uD558\\uAE30 \\uC704\\uD574\\uC11C \",(0,e.jsx)(n.a,{href:\"https://stackoverflow.com/questions/59205530/heroku-server-crashes-with-javascript-heap-out-of-memory-when-deploying-react\",children:\"\\uC790\\uBC14\\uC2A4\\uD06C\\uB9BD\\uD2B8\\uC758 Garbage Collector \\uC791\\uB3D9 \\uBA54\\uBAA8\\uB9AC \\uC124\\uC815\"}),\"\\uC744 \\uD558\\uB77C\\uB294 \\uAE00\\uC774 \\uAC80\\uC0C9\\uACB0\\uACFC \\uB9E8 \\uC0C1\\uB2E8\\uC5D0 \\uC704\\uCE58\\uD569\\uB2C8\\uB2E4. \\uC774\\uB294 Node \\uBC84\\uC804 12 \\uC774\\uD558\\uC5D0\\uC11C \\uC720\\uD6A8\\uD569\\uB2C8\\uB2E4. \\uC65C\\uB0D0\\uD558\\uBA74 Node 12\\uBC84\\uC804 \\uC774\\uD558\\uC5D0\\uC11C Garbage Collection\\uC774 \\uC791\\uB3D9\\uD558\\uB294 \\uAE30\\uBCF8 \\uBA54\\uBAA8\\uB9AC\\uB294 1.5GB\\uC600\\uACE0 Heroku\\uC758 \\uAE30\\uBCF8 \\uD50C\\uB79C\\uC774 \\uC81C\\uACF5\\uD558\\uB294 \\uBA54\\uBAA8\\uB9AC\\uB294 512MB\\uC774\\uAE30 \\uB54C\\uBB38\\uC785\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC 2022\\uB144 \\uAE30\\uC900 Node\\uC758 LTS\\uBC84\\uC804\\uC774 16\\uC73C\\uB85C \\uC62C\\uB77C\\uC654\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uB3D9\\uC801\\uC778 Garbage Collection\\uC774 \\uC801\\uC6A9\\uB429\\uB2C8\\uB2E4. \\uB530\\uB77C\\uC11C \\uD574\\uB2F9 \\uAE00\\uC740 \\uB354 \\uC774\\uC0C1 \\uC720\\uD6A8\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"]})}),(0,e.jsxs)(n.h4,{id:\"21-\\uD574\\uACB0\\uCC45\",children:[(0,e.jsx)(n.a,{href:\"#21-\\uD574\\uACB0\\uCC45\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2.1. \\uD574\\uACB0\\uCC45\"]}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"\\uAC00\\uC7A5 \\uAC04\\uB2E8\\uD55C \\uD574\\uACB0\\uCC45\\uC740 Heroku\\uC5D0\\uC11C \\uBB34\\uB8CC\\uB85C \\uC81C\\uACF5\\uD558\\uB294 Plan \\uC774 \\uC544\\uB2CC \\uB354 \\uB9CE\\uC740 \\uBA54\\uBAA8\\uB9AC\\uB97C \\uC81C\\uACF5\\uD558\\uB294 Plan\\uC744 \\uC0AC\\uC6A9\\uD558\\uB294 \\uAC83\\uC785\\uB2C8\\uB2E4. \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC774 \\uC791\\uB3D9\\uD560\\uB54C \\uB300\\uBD80\\uBD84\\uC758 \\uACBD\\uC6B0 \\uD5E4\\uB85C\\uCFE0\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 \\uAE30\\uBCF8 \\uBA54\\uBAA8\\uB9AC\\uBCF4\\uB2E4 \\uC801\\uAC8C \\uC0AC\\uC6A9\\uD558\\uC9C0\\uB9CC \\uD2B9\\uC815 \\uC2DC\\uB098\\uB9AC\\uC624\\uC5D0\\uC11C Garbage Collection\\uC774 \\uC791\\uB3D9\\uD558\\uC9C0 \\uC804\\uC5D0 Heroku\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 512MB \\uC774\\uC0C1\\uC744 \\uC0AC\\uC6A9\\uD558\\uAC8C \\uB420 \\uC218\\uB3C4 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uB530\\uB77C\\uC11C \\uB354 \\uB192\\uC740 Plan\\uC744 \\uC0AC\\uC6A9\\uD558\\uB294 \\uAC83\\uC740 \\uC88B\\uC740 \\uC120\\uD0DD\\uC785\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC \\uC774 \\uACBD\\uC6B0 \\uB9E4\\uB2EC 7\\uB2EC\\uB7EC \\uB610\\uB294 \\uADF8 \\uC774\\uC0C1\\uC758 \\uBE44\\uC6A9\\uC744 \\uB0B4\\uC57C\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uCDE8\\uBBF8\\uB85C \\uC9C4\\uD589\\uD558\\uB294 \\uD504\\uB85C\\uC81D\\uD2B8\\uC5D0 \\uC801\\uC808\\uD558\\uC9C0 \\uC54A\\uC744 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4\"}),(0,e.jsxs)(n.li,{children:[\"\\uC2E4\\uC81C \\uBC30\\uD3EC\\uC5D0 \\uD544\\uC694\\uC5C6\\uB294 \\uD328\\uD0A4\\uC9C0\\uB4E4\\uC744 package.json\\uC5D0\\uC11C \\uC81C\\uAC70\\uD558\\uAC70\\uB098 devDependencies\\uC5D0 \\uC120\\uC5B8\\uD574\\uC8FC\\uBA74 \\uB429\\uB2C8\\uB2E4. \\uC774\\uB807\\uAC8C \\uD558\\uBA74 heroku\\uC758 CI/CD \\uD50C\\uB7AB\\uD3FC\\uC774 \\uC790\\uB3D9\\uC73C\\uB85C devDependencies\\uC5D0 \\uC120\\uC5B8\\uB41C \\uD328\\uD0A4\\uC9C0\\uB4E4\\uC744 \\uC0AD\\uC81C\\uD574\\uC90D\\uB2C8\\uB2E4. \",(0,e.jsx)(n.code,{children:\"\\uD558\\uC9C0\\uB9CC \\uC774 \\uACBD\\uC6B0, \\uAC1C\\uBC1C\\uC790\\uB4E4\\uC774 \\uD1B5\\uC0C1\\uC801\\uC73C\\uB85C devDependencies\\uC5D0 \\uC120\\uC5B8\\uB418\\uC5B4\\uC57C\\uD55C\\uB2E4\\uACE0 \\uC0DD\\uAC01\\uB418\\uB294 \\uD328\\uD0A4\\uC9C0\\uAC00 \\uC2E4\\uC81C dependencies\\uC5D0 \\uC788\\uC5B4\\uC57C\\uD558\\uB294 \\uACBD\\uC6B0\\uAC00 \\uC788\\uC5B4 \\uC8FC\\uC758\\uB97C \\uD574\\uC57C\\uD569\\uB2C8\\uB2E4.(\\uC8FC\\uB85C \\uB7F0\\uD0C0\\uC784\\uC5D0 \\uBC1C\\uC0DD\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC8FC\\uC758 \\uD544\\uC694)\"})]})]}),(0,e.jsxs)(n.h3,{id:\"3-devdependencies\\uC5D0\\uC11C-\\uC124\\uCE58\\uB41C-\\uBAA8\\uB4C8\\uC774-heroku\\uC5D0\\uC11C-\\uBC30\\uD3EC\\uB41C-\\uD6C4-\\uC0AC\\uC6A9\\uD560-\\uC218-\\uC5C6\\uB2E4\\uACE0-\\uC5D0\\uB7EC\\uAC00-\\uBC1C\\uC0DD\",children:[(0,e.jsx)(n.a,{href:\"#3-devdependencies\\uC5D0\\uC11C-\\uC124\\uCE58\\uB41C-\\uBAA8\\uB4C8\\uC774-heroku\\uC5D0\\uC11C-\\uBC30\\uD3EC\\uB41C-\\uD6C4-\\uC0AC\\uC6A9\\uD560-\\uC218-\\uC5C6\\uB2E4\\uACE0-\\uC5D0\\uB7EC\\uAC00-\\uBC1C\\uC0DD\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. devDependencies\\uC5D0\\uC11C \\uC124\\uCE58\\uB41C \\uBAA8\\uB4C8\\uC774 Heroku\\uC5D0\\uC11C \\uBC30\\uD3EC\\uB41C \\uD6C4 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC5C6\\uB2E4\\uACE0 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\"]}),(0,e.jsxs)(n.p,{children:[\"\\uC774 \\uC5D0\\uB7EC\\uB294 \\uC2E4\\uC81C \\uBC30\\uD3EC\\uD6C4 \\uC5D0\\uB7EC\\uB97C \\uC7A1\\uC744 \\uC218 \\uC788\\uC5B4 \\uD070 \\uC8FC\\uC758\\uB97C \\uC694\\uD569\\uB2C8\\uB2E4(\\uC11C\\uBE44\\uC2A4 \\uC911\\uC5D0 \\uD574\\uB2F9 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uBA74 \\uD070 \\uBB38\\uC81C\\uAC00 \\uB429\\uB2C8\\uB2E4). \\uD574\\uB2F9 \\uBB38\\uC81C\\uB294 \\uC81C\\uAC00 \\uC624\\uD508\\uC18C\\uC2A4\\uB85C \\uD480\\uC5B4\\uB193\\uC740 \",(0,e.jsx)(n.a,{href:\"https://github.com/woody-morgan/nestify/blob/main/src/shared/services/api-config.service.ts\",children:\"nestify\"}),\" \\uC800\\uC7A5\\uC18C\\uC5D0 \\uC788\\uB294 \\uD30C\\uC77C\\uC5D0\\uC11C \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uC704 \\uD30C\\uC77C\\uC758 \\uCF54\\uB4DC\\uC911 if(module.hot) \\uBD80\\uBD84\\uC5D0\\uC11C \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsx)(\"div\",{className:\"remark-code-title\",children:\"api-config.service.ts\"}),(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"get\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"postgresConfig\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" TypeOrmModuleOptions \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" entities \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      __dirname \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'/../../modules/**/*.entity{.ts,.js}'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      __dirname \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'/../../modules/**/*.view-entity{.ts,.js}'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" migrations \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"__dirname \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'/../../database/migrations/*{.ts,.js}'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"module\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"hot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" entityContext \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'./../../modules'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsxs)(n.span,{className:\"token language-regex regex-source\",children:[(0,e.jsx)(n.span,{className:\"token escape special-escape\",children:\"\\\\.\"}),\"entity\",(0,e.jsx)(n.span,{className:\"token escape special-escape\",children:\"\\\\.\"}),\"ts\",(0,e.jsx)(n.span,{className:\"token function anchor\",children:\"$\"})]}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC704 \\uCF54\\uB4DC\\uB294 \\uD504\\uB85C\\uC81D\\uD2B8 Hot Reload\\uC2DC \\uBCC0\\uACBD\\uB41C \\uD30C\\uC77C\\uC5D0 \\uB300\\uD574\\uC11C\\uB9CC Refresh\\uB97C \\uD574\\uC8FC\\uB294 \\uCF54\\uB4DC\\uC785\\uB2C8\\uB2E4. \\uC774 \\uAE30\\uB2A5\\uC744 \\uC0AC\\uC6A9\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 \\uC544\\uB798\\uC758 \\uD328\\uD0A4\\uC9C0\\uB4E4\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\"}),(0,e.jsx)(\"div\",{className:\"remark-code-title\",children:\"package.json\"}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-json\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"dependencies\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"webpack\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"^5.73.0\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"webpack-cli\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"^4.10.0\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"webpack-node-externals\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"^3.0.0\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"@types/webpack-env\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"^1.17.0\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"clean-webpack-plugin\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"^4.0.0\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\uD558\\uC9C0\\uB9CC \\uD1B5\\uC0C1\\uC801\\uC73C\\uB85C \\uC704\\uC758 webpack\\uACFC \\uAD00\\uB828\\uB41C \\uD328\\uD0A4\\uC9C0\\uB4E4\\uC740 dependencies\\uC5D0 \\uC120\\uC5B8\\uB418\\uB294 \\uAC83\\uC774 \\uC544\\uB2CC devDependencies\\uC5D0 \\uC120\\uC5B8\\uB418\\uC5B4\\uC57C\\uD55C\\uB2E4\\uACE0 \\uB300\\uBD80\\uBD84\\uC758 \",(0,e.jsx)(n.a,{href:\"https://jakekwak.gitbook.io/nestjs/techniques/hot-reload-webpack\",children:\"\\uBE14\\uB85C\\uADF8 \\uAE00\"}),\"\\uC5D0\\uC11C \\uC548\\uB0B4\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uC774\\uB294 \\uBD84\\uBA85 \\uB9DE\\uC73C\\uBA70, \\uB610\\uD55C \\uC704\\uC758 selective hot reload \\uAE30\\uB2A5\\uC740 NODE_ENV\\uAC00 development\\uC778 \\uACBD\\uC6B0\\uC5D0\\uB9CC \\uC0AC\\uC6A9\\uD558\\uB294 \\uAE30\\uB2A5\\uC774\\uBBC0\\uB85C \\uB17C\\uB9AC\\uC801\\uC73C\\uB85C\\uB3C4 build \\uC774\\uD6C4 \\uD544\\uC694\\uAC00 \\uC5C6\\uB294 \\uCF54\\uB4DC\\uC785\\uB2C8\\uB2E4. \\uAC8C\\uB2E4\\uAC00 local\\uC5D0\\uC11C \\uC2E4\\uD589\\uC2DC \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.(local\\uC5D0\\uC11C\\uB294 build\\uD558\\uACE0 \\uC2E4\\uD589\\uD574\\uC11C node_modules\\uC5D0 \\uC788\\uB294 devDependencies \\uBAA8\\uB4C8\\uC744 \\uC0AD\\uC81C\\uD558\\uC9C0 \\uC54A\\uAE30 \\uB54C\\uBB38\\uC785\\uB2C8\\uB2E4)\"]}),(0,e.jsx)(n.p,{children:\"\\uD558\\uC9C0\\uB9CC Heroku\\uC5D0\\uC11C \\uBC30\\uD3EC\\uD574\\uB3C4 \\uC5D0\\uB7EC\\uC5C6\\uC774 \\uB3D9\\uC791\\uD560\\uAE4C\\uC694? \\uADF8\\uB807\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4. Heroku\\uC640 \\uAC19\\uC740 CI/CD \\uD50C\\uB7AB\\uD3FC\\uC740 devDependencies\\uB97C \\uBAA8\\uB450 \\uC0AD\\uC81C\\uD569\\uB2C8\\uB2E4. \\uC989 \\uD504\\uB85C\\uC81D\\uD2B8\\uAC00 \\uBE4C\\uB4DC \\uB418\\uACE0, devDependencies\\uB97C node_modules\\uC5D0\\uC11C \\uC0AD\\uC81C\\uD558\\uACE0, \\uD504\\uB85C\\uC81D\\uD2B8\\uB97C \\uC2E4\\uD589\\uD558\\uBA74 \\uADF8\\uB54C \\uC704\\uC640 \\uAC19\\uC740 devDependencies\\uC5D0 \\uC120\\uC5B8\\uB41C \\uBAA8\\uB4C8\\uC774 \\uD544\\uC694\\uD55C \\uCF54\\uB4DC\\uB294 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uB294 \\uAC83\\uC785\\uB2C8\\uB2E4. \\uB530\\uB77C\\uC11C \\uC801\\uC808\\uD558\\uAC8C \\uD328\\uD0A4\\uC9C0\\uC758 \\uC704\\uCE58\\uB97C \\uC120\\uC5B8\\uD558\\uC9C0 \\uC54A\\uC73C\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD569\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"RuntimeError\",src:\"https://d.pr/i/K6ykSr.png\"})}),(0,e.jsxs)(n.h4,{id:\"31-\\uD574\\uACB0\\uCC45\",children:[(0,e.jsx)(n.a,{href:\"#31-\\uD574\\uACB0\\uCC45\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3.1. \\uD574\\uACB0\\uCC45\"]}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"devDependencies\\uC5D0 \\uC120\\uC5B8\\uB41C \\uBAA8\\uB4C8\\uC744 dependencies\\uC5D0 \\uC120\\uC5B8\\uD558\\uC5EC \\uC0AC\\uC6A9\\uD569\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC Deploy\\uB41C \\uBC31\\uC564\\uB4DC \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC758 \\uBA54\\uBAA8\\uB9AC \\uC0AC\\uC6A9\\uB960\\uC744 \\uB192\\uC77C \\uC218 \\uC788\\uACE0, \\uB610\\uD55C \\uD1B5\\uC0C1\\uC801\\uC778 \\uBAA8\\uB4C8 \\uC120\\uC5B8 \\uC704\\uCE58\\uAC00 \\uC544\\uB2C8\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uBD88\\uD544\\uC694\\uD55C \\uC624\\uD574\\uB97C \\uC77C\\uC73C\\uD0AC \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uB530\\uB77C\\uC11C \\uC815\\uB9D0 \\uD544\\uC694\\uD55C \\uBAA8\\uB4C8\\uB9CC \\uC704\\uCE58\\uB97C \\uC62E\\uACA8\\uC11C \\uC120\\uC5B8\\uD574\\uC57C\\uD569\\uB2C8\\uB2E4.\"})}),(0,e.jsxs)(n.h2,{id:\"heroku-postgres\\uC5D0-postgis-\\uC5F0\\uACB0\\uD558\\uAE30\",children:[(0,e.jsx)(n.a,{href:\"#heroku-postgres\\uC5D0-postgis-\\uC5F0\\uACB0\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Heroku Postgres\\uC5D0 Postgis \\uC5F0\\uACB0\\uD558\\uAE30\"]}),(0,e.jsxs)(n.p,{children:[\"\\uBA3C\\uC800 \",(0,e.jsx)(n.a,{href:\"https://m.blog.naver.com/batgirl1/222126972818\",children:\"\\uBE14\\uB85C\\uADF8\"}),\"\\uB97C \\uCC38\\uC870\\uD558\\uC5EC Heroku Postgresql\\uC744 \\uC124\\uCE58\\uD574\\uC8FC\\uC138\\uC694\"]}),(0,e.jsx)(n.p,{children:\"\\uD504\\uB85C\\uC81D\\uD2B8\\uC640 Postgresql\\uC744 \\uC5F0\\uACB0\\uD588\\uB2E4\\uBA74 heroku postgresql \\uC124\\uC815\\uC911 Settings \\uC139\\uC158\\uC5D0\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC740 Credentials \\uC815\\uBCF4\\uB97C \\uBCFC \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"credentials\",src:\"https://d.pr/TVFj55.png\"})}),(0,e.jsx)(n.p,{children:\"\\uADF8 \\uC911 \\uB9E8 \\uC544\\uB798\\uC5D0 \\uC788\\uB294 Heroku CLI\\uC5D0 \\uC788\\uB294 \\uCEE4\\uB9E8\\uB4DC\\uB97C \\uC804\\uBD80 \\uBCF5\\uC0AC\\uD574\\uC11C \\uBCF8\\uC778\\uC758 \\uD130\\uBBF8\\uB110\\uC5D0 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694(\\uB9CC\\uC57D heroku cli\\uAC00 \\uC124\\uCE58\\uB418\\uC5B4 \\uC788\\uC9C0 \\uC54A\\uB2E4\\uBA74 \\uC124\\uCE58\\uD574\\uC8FC\\uC138\\uC694)\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"install extension\",src:\"https://d.pr/gzG7Ry.png\"})}),(0,e.jsxs)(n.p,{children:[\"\\uADF8\\uB7FC \\uC704\\uC640 \\uAC19\\uC740 psql CLI\\uCC3D\\uC774 \\uB728\\uACE0 \",(0,e.jsx)(n.code,{children:\"CREATE EXTENSION postgis;\"}),\"\\uB77C\\uACE0 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694(\\uC704\\uC758 \\uADF8\\uB9BC\\uC5D0 postigs\\uB77C\\uACE0 \\uC624\\uD0C0\\uAC00 \\uB0AC\\uC2B5\\uB2C8\\uB2E4) \\uADF8\\uB807\\uAC8C \\uB418\\uBA74 \\uC790\\uB3D9\\uC73C\\uB85C postgis\\uAC00 heroku postgresql\\uC5D0 \\uC124\\uCE58\\uB429\\uB2C8\\uB2E4. \\uC774\\uC81C postgis\\uAD00\\uB828 \\uAE30\\uB2A5\\uC744 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. Heroku\\uC5D0\\uC11C \\uC9C0\\uC6D0\\uD558\\uB294 postgresql Extension\\uC740 \",(0,e.jsx)(n.a,{href:\"https://devcenter.heroku.com/articles/heroku-postgres-extensions-postgis-full-text-search\",children:\"\\uB9C1\\uD06C\"}),\"\\uC5D0\\uC11C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \",(0,e.jsx)(n.code,{children:\"\\uB2E8 postgis\\uC758 \\uACBD\\uC6B0 Extension \\uC124\\uCE58\\uC2DC \\uB300\\uB7B5 8500\\uAC1C\\uC758 DB Row\\uAC00 \\uCD94\\uAC00\\uB429\\uB2C8\\uB2E4(\\uC9C0\\uB9AC \\uC815\\uBCF4\\uB97C \\uCD94\\uAC00\\uD558\\uAE30 \\uC704\\uD574\\uC11C). \\uC774\\uB294 Heroku Postgresql Hobby Tier\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 10000\\uAC1C\\uC758 Row \\uC81C\\uD55C\\uC758 85%\\uB97C \\uCC28\\uC9C0\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC0AC\\uC6A9\\uC5D0 \\uC8FC\\uC758\\uAC00 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4\"})]}),(0,e.jsxs)(n.h2,{id:\"\\uACB0\\uB860\",children:[(0,e.jsx)(n.a,{href:\"#\\uACB0\\uB860\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uACB0\\uB860\"]}),(0,e.jsx)(n.p,{children:\"\\uC704\\uC758 \\uD574\\uACB0\\uCC45\\uC774 \\uC5EC\\uB7EC\\uBD84\\uC5D0\\uAC8C \\uB3C4\\uC6C0\\uC774 \\uB418\\uC5C8\\uC73C\\uBA74 \\uC88B\\uACA0\\uC2B5\\uB2C8\\uB2E4. \\uAD81\\uAE08\\uD55C \\uC810\\uC774 \\uC788\\uB2E4\\uBA74 \\uB313\\uAE00\\uC5D0 \\uB0A8\\uACA8\\uC8FC\\uC138\\uC694\"})]})}}var b=w;function v(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return j;})();\n;return Component;","toc":[{"value":"Intro","url":"#intro","depth":2},{"value":"배포하면서 생긴 문제점","url":"#배포하면서-생긴-문제점","depth":2},{"value":"1. 로컬 Nestjs 어플리케이션에서 Heroku에서 제공한 Postgres 서버에 접속할 수 없음","url":"#1-로컬-nestjs-어플리케이션에서-heroku에서-제공한-postgres-서버에-접속할-수-없음","depth":3},{"value":"1.1. 해결책","url":"#11-해결책","depth":4},{"value":"2. Javascript Heap Memory Overflow","url":"#2-javascript-heap-memory-overflow","depth":3},{"value":"2.0. 알아야할 점","url":"#20-알아야할-점","depth":4},{"value":"2.1. 해결책","url":"#21-해결책","depth":4},{"value":"3. devDependencies에서 설치된 모듈이 Heroku에서 배포된 후 사용할 수 없다고 에러가 발생","url":"#3-devdependencies에서-설치된-모듈이-heroku에서-배포된-후-사용할-수-없다고-에러가-발생","depth":3},{"value":"3.1. 해결책","url":"#31-해결책","depth":4},{"value":"Heroku Postgres에 Postgis 연결하기","url":"#heroku-postgres에-postgis-연결하기","depth":2},{"value":"결론","url":"#결론","depth":2}],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.46,"time":327600,"words":1092},"slug":"backend/deploy-nestjs-application-on-heroku-system","fileName":"backend/deploy-nestjs-application-on-heroku-system.mdx","title":"Deploy Nestjs Application on Heroku","date":"2022-08-07T00:00:00.000Z","tags":["backend"],"draft":false,"summary":"Nestjs 어플리케이션을 배포하면서 생긴 문제점을 정리하였습니다","images":["/static/images/heroku-nestjs.webp"],"layout":"PostLayout"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.285,"time":17100,"words":57},"slug":["default"],"fileName":"default.mdx","name":"Kim, Dong-Wook","avatar":"/static/images/avatar.jpeg","occupation":"Frontend Developer","company":"Krafton Inc.","email":"woody.morgan.crafts@gmail.com","linkedin":"https://www.linkedin.com/in/woody-morgan/","github":"https://github.com/woody-morgan","date":null}],"prev":{"title":"Implement Reuseable \u003cimg/\u003e","date":"2022-08-01T00:00:00.000Z","tags":["frontend"],"draft":false,"summary":"CLS(Cumulative Layout Shift)를 줄이고 렌더링 성능을 개선한 \u003cimg/\u003e 컴포넌트 제작기","images":["/static/images/img.jpeg"],"layout":"PostLayout","slug":"frontend/implement-reflow-prevented-lazy-loading-image-component"},"next":{"title":"Next.js Application 최적화하기(feat. Vercel)","date":"2022-09-30T00:00:00.000Z","tags":["frontend"],"draft":false,"summary":"Serverless Function 및 Next Image 태그, SEO 최적화 등 Next.js 어플리케이션 최적화 방법을 알아봅니다.","images":[],"layout":"PostLayout","slug":"frontend/optimizing-nextjs-application"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["backend","deploy-nestjs-application-on-heroku-system"]},"buildId":"erbOjlWZPobhv0pvnzdZV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>